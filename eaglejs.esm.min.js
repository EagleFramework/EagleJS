/**
 * EagleJS.
 *
 * @version   0.5.0
 * @copyright 2020 Cem Demirkartal
 * @license   MIT
 * @see       {@link https://github.com/EagleFramework/EagleJS GitHub}
 * @augments  Array<DOMItem>
 */
class EagleJS extends Array{constructor(e=null,t=document){if(super(),null!==e)if("string"==typeof e){if(!/^\s*<.+>\s*$/.test(e))return new EagleJS(t).find(e);if(EagleJS.isDocument(t)){const n=t.implementation.createHTMLDocument("");return new EagleJS("body",n).html(e).children()}}else Array.isArray(e)?this.push(...e):this.push(e)}addClass(...e){return this.forEach((t=>{EagleJS.isElement(t)&&t.classList.add(...e)})),this}after(...e){const t=[];e.forEach((e=>{"string"==typeof e?t.push(document.createTextNode(e)):t.push(e)}));let n=!0;return this.slice().reverse().forEach((e=>{if(EagleJS.isChildNode(e)&&null!==e.parentNode){const r=e.parentNode;n?(t.forEach((t=>{r.insertBefore(t,e.nextSibling)})),n=!1):t.forEach((t=>{r.insertBefore(t.cloneNode(!0),e.nextSibling)}))}})),this}append(...e){const t=[];e.forEach((e=>{"string"==typeof e?t.push(document.createTextNode(e)):t.push(e)}));let n=!0;return this.slice().reverse().forEach((e=>{EagleJS.isParentNode(e)&&(n?(t.forEach((t=>{e.appendChild(t)})),n=!1):t.forEach((t=>{e.appendChild(t.cloneNode(!0))})))})),this}attr(e,t){if(void 0!==t)return this.forEach((n=>{EagleJS.isElement(n)&&n.setAttribute(e,t)})),this;let n=null;return this.some((t=>!!EagleJS.isElement(t)&&(n=t.getAttribute(e),!0))),n}before(...e){const t=[];e.forEach((e=>{"string"==typeof e?t.push(document.createTextNode(e)):t.push(e)}));let n=!0;return this.slice().reverse().forEach((e=>{if(EagleJS.isChildNode(e)&&null!==e.parentNode){const r=e.parentNode;n?(t.forEach((t=>{r.insertBefore(t,e)})),n=!1):t.forEach((t=>{r.insertBefore(t.cloneNode(!0),e)}))}})),this}children(e=null){const t=new EagleJS;return this.forEach((e=>{EagleJS.isParentNode(e)&&t.push(...e.children)})),null!==e?t.filter(e):t}clone(e=!1){const t=new EagleJS;return this.forEach((n=>{EagleJS.isNode(n)&&t.push(n.cloneNode(e))})),t}closest(e){const t=new EagleJS;return this.forEach((n=>{if(EagleJS.isElement(n)){const r=n.closest(e);null!==r&&t.push(r)}})),t}concat(...e){return new EagleJS(super.concat(...e))}contents(){const e=new EagleJS;return this.forEach((t=>{EagleJS.isNode(t)&&e.push(...t.childNodes)})),e}empty(){return this.contents().remove(),this}filter(e,t){return"string"==typeof e?this.filter((t=>EagleJS.isElement(t)&&t.matches(e))):"function"==typeof e?super.filter(e,t):Array.isArray(e)?this.filter((t=>e.includes(t))):this.filter((t=>t===e))}find(e,t){const n=new EagleJS;if("string"==typeof e)this.forEach((t=>{EagleJS.isParentNode(t)&&n.push(...t.querySelectorAll(e))}));else if("function"==typeof e)return super.find(e,t);return n}hasClass(e){return this.some((t=>EagleJS.isElement(t)&&t.classList.contains(e)))}html(e){if(void 0!==e)return this.forEach((t=>{EagleJS.isElement(t)&&(t.innerHTML=e)})),this;let t="";return this.some((e=>!!EagleJS.isElement(e)&&(t=e.innerHTML,!0))),t}is(e){return"string"==typeof e?this.some((t=>EagleJS.isElement(t)&&t.matches(e))):"function"==typeof e?this.some(e):Array.isArray(e)?this.some((t=>e.includes(t))):this.some((t=>t===e))}static isChildNode(e){return this.isNode(e)&&[1,3,4,7,8,10].includes(e.nodeType)}static isDocument(e){return this.isNode(e)&&9===e.nodeType}static isDOMItem(e){return Boolean(e)&&Boolean(e.addEventListener)}static isElement(e){return this.isNode(e)&&1===e.nodeType}static isNode(e){return Boolean(e)&&Boolean(e.nodeType)}static isParentNode(e){return this.isNode(e)&&[1,9,11].includes(e.nodeType)}next(e=null){const t=new EagleJS;return this.forEach((e=>{"nextElementSibling"in e&&null!==e.nextElementSibling&&t.push(e.nextElementSibling)})),null!==e?t.filter(e):t}not(e){return"string"==typeof e?this.filter((t=>EagleJS.isElement(t)&&!t.matches(e))):"function"==typeof e?this.filter(((t,n,r)=>!Boolean(e(t,n,r)))):Array.isArray(e)?this.filter((t=>!e.includes(t))):this.filter((t=>t!==e))}off(e,t,n=!1){return this.forEach((r=>{r.removeEventListener(e,t,n)})),this}on(e,t,n=!1){return this.forEach((r=>{r.addEventListener(e,t,n)})),this}one(e,t){return this.on(e,t,{once:!0})}parent(e=null){const t=new EagleJS;return this.forEach((e=>{EagleJS.isNode(e)&&null!==e.parentNode&&t.push(e.parentNode)})),null!==e?t.filter(e):t}prepend(...e){const t=[];e.forEach((e=>{"string"==typeof e?t.push(document.createTextNode(e)):t.push(e)}));let n=!0;return this.slice().reverse().forEach((e=>{EagleJS.isParentNode(e)&&(n?(t.forEach((t=>{e.insertBefore(t,e.firstChild)})),n=!1):t.forEach((t=>{e.insertBefore(t.cloneNode(!0),e.firstChild)})))})),this}prev(e=null){const t=new EagleJS;return this.forEach((e=>{"previousElementSibling"in e&&null!==e.previousElementSibling&&t.push(e.previousElementSibling)})),null!==e?t.filter(e):t}push(...e){return super.push(...e.filter((e=>EagleJS.isDOMItem(e)&&!this.includes(e))))}ready(e){return this.forEach((t=>{EagleJS.isDocument(t)&&("loading"===t.readyState?t.addEventListener("DOMContentLoaded",e):setTimeout(e))})),this}remove(){return this.forEach((e=>{EagleJS.isChildNode(e)&&null!==e.parentNode&&e.parentNode.removeChild(e)})),this}removeAttr(...e){return this.forEach((t=>{EagleJS.isElement(t)&&e.forEach((e=>{t.removeAttribute(e)}))})),this}removeClass(...e){return this.forEach((t=>{EagleJS.isElement(t)&&t.classList.remove(...e)})),this}replaceWith(...e){return this.before(...e).remove()}siblings(e=null){const t=new EagleJS;return this.forEach((n=>{const r=new EagleJS(n);t.push(...r.parent().children(e).not(r))})),t}text(e){if(void 0!==e)return this.forEach((t=>{EagleJS.isNode(t)&&(t.textContent=e)})),this;let t=null;return this.some((e=>!!EagleJS.isNode(e)&&(t=e.textContent,!0))),t}toggleClass(e,t=null){return this.forEach((t=>{EagleJS.isElement(t)&&t.classList.toggle(e)})),this}trigger(e,t=null){const n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});return this.forEach((e=>{e.dispatchEvent(n)})),this}unshift(...e){return super.unshift(...e.filter((e=>EagleJS.isDOMItem(e)&&!this.includes(e))))}}const EagleJSProxy=function(e=null,t=document){return new EagleJS(e,t)};export{EagleJS,EagleJSProxy};